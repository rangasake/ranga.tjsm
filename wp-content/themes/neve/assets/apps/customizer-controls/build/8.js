(window.webpackJsonp_neve=window.webpackJsonp_neve||[]).push([[8],{51:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(1),a=n.n(o),r=n(15),c=function(e){var t,n,o=e.onChange,a=e.currentValue,c=e.label,s=e.id,l=e.toolbars,u=e.allowedDynamicFields,d=Object(i.useRef)(null),m=Boolean(Array.isArray(u)&&u.length),v=l.toolbar1,f=void 0===v?"formatselect,bold,italic,bullist,numlist,link,wp_adv":v,w=l.toolbar2,b=void 0===w?"strikethrough,hr,forecolor,pastetext,removeformat":w,g="".concat(s,"-editor");NeveReactCustomize.fieldSelection={};var y=wp.oldEditor||wp.editor,p=Object(i.useCallback)((function(){return o(y.getContent(g))}),[g]),h=function(){window.tinymce.editors[g]&&window.tinymce.editors[g].on("change",p)},E=function(e){o(e),window.tinymce.editors[g].setContent(e)};return Object(i.useEffect)((function(){d&&d.current&&(d.current.addEventListener("change",(function(){E(d.current.value)})),d.current.addEventListener("focusout",(function(e){NeveReactCustomize.fieldSelection[s]={start:e.target.selectionStart,end:e.target.selectionEnd}}))),y.initialize(g,{quicktags:!0,mediaButtons:!0,tinymce:{toolbar1:f,toolbar2:b,style_formats_merge:!0,style_formats:[]}}),setTimeout(h,0),wp.oldEditor&&setTimeout((function(){window.tinymce.editors[g]&&window.tinymce.editors[g].off("change",p),y.remove(g),y.initialize(g,{quicktags:!0,mediaButtons:!0,tinymce:{toolbar1:f,toolbar2:b,style_formats_merge:!0,style_formats:[]}}),setTimeout(h,0)}),300)}),[]),Object(i.useEffect)((function(){document.addEventListener("neve-changed-customizer-value",(function(e){return!!e.detail&&e.detail.id===s&&void E(e.detail.value)}))}),[]),Object(i.createElement)("div",{className:"neve-white-background-control neve-rich-text",style:{position:"relative"}},Object(i.createElement)("span",{className:"customize-control-title"},c),m&&Object(i.createElement)("span",{style:{position:"absolute",top:0,right:"8px"}},Object(i.createElement)(r.a,{options:(null===(t=NeveReactCustomize)||void 0===t||null===(n=t.dynamicTags)||void 0===n?void 0:n.options)||[],allowedOptionsTypes:u,onSelect:function(e,t){return function(e,t){var n,i=d.current,o=!window.tinymce.editors[g].hidden;if(n="url"===t?'<a href="{'.concat(e,'}">Link</a>'):"{".concat(e,"}"),o)window.tinymce.editors[g].editorCommands.execCommand("mceInsertContent",!1,n),window.tinymce.editors[g].focus();else{if(NeveReactCustomize.fieldSelection[s]){var a=NeveReactCustomize.fieldSelection[s],r=a.start,c=a.end,l=i.value.length;i.value=i.value.substring(0,r)+n+i.value.substring(c,l)}else i.value+=n;i.focus()}i.dispatchEvent(new Event("change"))}(e,t)}})),Object(i.createElement)("textarea",{ref:d,id:g,className:"neve-custom-html-control-tinymce-editor mce-tinymce",value:a,style:{width:"100%"},onChange:function(e){var t=e.target.value;return o(t)}}))};c.propTypes={id:a.a.string.isRequired,toolbars:a.a.object,allowedDynamicFields:a.a.array,label:a.a.string.isRequired,onChange:a.a.func.isRequired,currentValue:a.a.string.isRequired},t.default=c}}]);